<% content_for :title do %>
Camera Listing
<% end %>

<%= render 'shared/filters' %>
<div class="col-md-12">
  <div class="table-responsive">
    <table class="table table-list table-cameras">
      <thead>
        <tr>
          <th>Model</th>
          <th>Manufacturer</th>
          <th>Resolution</th>
          <th class='shape'>Shape</th>
          <% Camera::FEATURES.each do |feature| %>
          <th class="rotate">
            <div>
              <span>
                <%= feature %>
              </span>
            </div>
          </th>
          <% end %>
        </tr>
      </thead>

      <tbody>
        <% @cameras.each do |camera| %>
        <tr>
          <td>
            <% if camera.images.empty? %>
            <%= link_to_camera_url(camera.model, camera) %>
            <% else %>
            <%= link_to(manufacturer_camera_path(camera.manufacturer.manufacturer_slug, camera.camera_slug)) do %>
            <%= camera.model %>
            <%= image_tag(camera.images.sorted.first.file.url(:medium), class: 'align-right', data: { fullsize: camera.images.sorted.first.file.url(:medium) }) %>
            <% end %>
            <% end %>
          </td>
          <td><%= link_to camera.manufacturer.name, "/#{camera.manufacturer.manufacturer_slug}" %></td>
          <td><%= camera.resolution %></td>
          <td>
            <% if Camera::SHAPES.include? camera.shape %>
            <span class='icon-camera_shape_<%= camera.shape %>' title='<%= camera.shape.titleize %>'></span>
            <% end %>
          </td>
          <% Camera::FEATURES.each do |feature| %>
          <td class="feature">
            <% if camera[feature.parameterize.underscore] %>
            <span class="dot"></span>
            <% end %>
          </td>
          <% end %>
        </tr>
        <% end %>
      </tbody>
    </table>
    <%= paginate @cameras %>
  </div>
</div>
<div class="fullsize-image"></div>
